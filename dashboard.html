function loadQueue() {
  fetch("http://YOUR_SERVER_IP:3000/queue")
      .then(res => res.json())
      .then(queue => {
          const tbody = document.getElementById("queueBody");
          tbody.innerHTML = "";

          queue.forEach((client, index) => {
              const tr = document.createElement("tr");

              // Ticket
              const tdTicket = document.createElement("td");
              tdTicket.innerText = client.ticket;
              tdTicket.className = "ticket-" + client.ticket.charAt(0);
              tr.appendChild(tdTicket);

              // Arrival Time
              const tdArrival = document.createElement("td");
              tdArrival.innerText = client.arrivalTime || "-";
              tr.appendChild(tdArrival);

              // Service Advisor
              const tdAdvisor = document.createElement("td");
              const select = document.createElement("select");
              ["", "Abd El Salam", "Yadger", "Haytham"].forEach(name => {
                  const option = document.createElement("option");
                  option.value = name;
                  option.text = name;
                  select.appendChild(option);
              });
              select.value = client.serviceAdvisor || "";
              select.addEventListener("change", () => {
                  client.serviceAdvisor = select.value;
                  client.status = select.value !== "" ? "Received" : "Waiting";

                  // حدث البيانات على السيرفر
                  fetch(`http://YOUR_SERVER_IP:3000/queue/${index}`, {
                      method: "PUT",
                      headers: { "Content-Type": "application/json" },
                      body: JSON.stringify(client)
                  }).then(res => res.json())
                    .then(data => console.log(data.message));

                  renderStatus();
              });
              tdAdvisor.appendChild(select);
              tr.appendChild(tdAdvisor);

              // Status
              const tdStatus = document.createElement("td");
              const spanStatus = document.createElement("span");
              function renderStatus() {
                  spanStatus.className = "status status-" + client.status;
                  spanStatus.innerText = client.status;
              }
              renderStatus();
              tdStatus.appendChild(spanStatus);
              tr.appendChild(tdStatus);

              tbody.appendChild(tr);
          });
      });
}

// تحديث تلقائي كل 5 ثواني
setInterval(loadQueue, 5000);
window.onload = loadQueue;